<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetSim - AI Powered Simulations</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <meta property="og:image" content="logo.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <link rel="manifest" href="site.webmanifest">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
    body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: 'Poppins', sans-serif;
        background-color: #8ecae6;
        overflow: hidden;
        position: fixed;
        width: 100%;
    }
    #desktop {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        overflow: hidden;
    }
    #browser {
        width: 98%;
        height: 98%;
        background: #f0f0f0;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        position: absolute;
        top: 1%;
        left: 1%;
        right: 1%;
        bottom: 1%;
        border-radius: 8px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    #titlebar {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 8px 16px;
        font-weight: 500;
        display: flex;
        justify-content: space-between;
        align-items: center;
        user-select: none;
        font-size: 14px;
        flex-shrink: 0;
        border-radius: 8px 8px 0 0;
    }
    #window-controls {
        display: flex;
        align-items: center;
    }
    .window-button {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-left: 8px;
        cursor: pointer;
    }
    #close-button { background-color: #ff5f56; }
    #minimize-button { background-color: #ffbd2e; }
    #maximize-button { background-color: #27c93f; }
    #page-title {
        font-size: 0.9em;
    }
    #toolbar {
        background: #34495e;
        padding: 12px 12px;
        border-bottom: 3px solid #2c3e50;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        flex-shrink: 0;
    }
    #toolbar-left, #toolbar-right {
        display: flex;
        align-items: center;
    }
    #toolbar-left {
        margin-right: auto;
    }
    #addressbar-container {
        display: flex;
        align-items: center;
        flex-grow: 1;
        background: white;
        border-radius: 20px;
        margin: 0 8px;
        padding: 2px 8px;
        position: relative;
    }
    #addressbar-container:focus-within {
        box-shadow: 0 0 0 2px rgba(52, 152, 219,0.5);
    }
    #addressbar {
        flex-grow: 1;
        border: none;
        outline: none;
        font-size: 14px;
        padding: 6px 8px;
        width: 100%;
    }
    #addressbar-container .btn {
        background-color: #3498db;
        color: white;
        border-radius: 50%;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-left: 8px;
    }
    #addressbar-container .btn:hover {
        background-color: #2980b9;
    }
    #content {
        flex-grow: 1;
        overflow: auto;
        position: relative;
        background: white;
        padding: 16px;
        box-sizing: border-box;
        -webkit-overflow-scrolling: touch;
    }
    #content img {
        max-width: 100%;
        height: auto;
    }
    .btn {
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 6px;
        margin: 0 2px;
        color: #ecf0f1;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .btn:hover {
        background-color: rgba(255,255,255,0.1);
    }
    .btn:active {
        background-color: rgba(255,255,255,0.2);
    }
    .btn svg {
        width: 18px;
        height: 18px;
    }
    #loading-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255,255,255,0.8);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    }
    #loading-spinner {
        width: 80px;
        height: 80px;
        border: 6px solid #f3f3f3;
        border-top: 6px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    #loading-text {
        margin-top: 20px;
        font-size: 18px;
        font-weight: bold;
        color: #3498db;
    }
    #status-bar {
        background: #34495e;
        border-top: 1px solid #2c3e50;
        padding: 4px 16px;
        font-size: 11px;
        color: #ecf0f1;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-shrink: 0;
    }
    #bookmarks-panel {
        position: absolute;
        top: 50px;
        right: 10px;
        background: white;
        border: 1px solid #ccc;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        display: none;
        width: 300px;
        max-height: 400px;
        overflow-y: auto;
        z-index: 1000;
    }
    .bookmark-item {
        padding: 8px 16px;
        border-bottom: 1px solid #eee;
        transition: background-color 0.2s;
    }
    .bookmark-item:hover {
        background-color: #f5f5f5;
    }
    .bookmark-item:last-child {
        border-bottom: none;
    }
    .delete-bookmark {
        padding: 4px;
        border-radius: 50%;
        transition: background-color 0.2s;
    }
    .delete-bookmark:hover {
        background-color: #fee2e2;
    }
    .clear-all-bookmarks {
        transition: background-color 0.2s;
    }
    #revisions-panel {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: white;
        border: 1px solid #ccc;
        border-radius: 0 0 4px 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        display: none;
        max-height: 60vh;
        overflow-y: auto;
        z-index: 1000;
    }
    .revision-item {
        display: flex;
        padding: 12px;
        border-bottom: 1px solid #eee;
        cursor: pointer;
    }
    .revision-item:hover {
        background-color: #f5f5f5;
    }
    .revision-screenshot {
        width: 150px;
        height: 90px;
        object-fit: cover;
        margin-right: 15px;
    }
    .revision-prompt {
        flex-grow: 1;
        font-size: 14px;
    }
    #model-select-container {
        position: relative;
    }
    #model-select-btn {
        background: transparent;
        border: none;
        cursor: pointer;
        padding: 6px;
        margin: 0 2px;
        color: #ecf0f1;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    #model-options {
        position: absolute;
        top: 100%;
        right: 0;
        background: white;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        display: none;
        z-index: 1000;
    }
    .model-option {
        padding: 12px 12px;
        cursor: pointer;
        white-space: nowrap;
    }
    .model-option:hover {
        background-color: #f5f5f5;
    }
    .model-option.active {
        background-color: #3498db;
        color: white;
    }
    #publish-btn {
        background-color: #27ae60;
        color: white;
        border: none;
        padding: 6px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        display: none;
    }
    #publish-btn:hover {
        background-color: #2ecc71;
    }
    #modal {
        display: none;
        position: fixed;
        z-index: 1001;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.4);
    }
    #modal-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 600px;
        border-radius: 8px;
    }
    #modal-close {
        color: #aaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
    }
    #modal-close:hover,
    #modal-close:focus {
        color: black;
        text-decoration: none;
        cursor: pointer;
    }
    #generated-url {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    #copy-url, #open-url {
        background-color: #3498db;
        color: white;
        border: none;
        padding: 10px 20px;
        margin: 5px;
        border-radius: 4px;
        cursor: pointer;
    }
    #copy-url:hover, #open-url:hover {
        background-color: #2980b9;
    }
    #improved-prompt-modal {
        display: none;
        position: fixed;
        z-index: 2001;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.4);
    }
    #improved-prompt-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 600px;
        border-radius: 8px;
    }
    #improved-prompt-text {
        width: 100%;
        height: 150px;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        resize: vertical;
    }
    #improved-prompt-buttons {
        display: flex;
        justify-content: flex-end;
    }
    #use-prompt, #cancel-prompt {
        margin-left: 10px;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    #use-prompt {
        background-color: #3498db;
        color: white;
    }
    #cancel-prompt {
        background-color: #ccc;
        color: black;
    }
    .highlight {
        outline: 2px solid #3498db;
        position: relative;
    }
    .edit-menu {
        position: absolute;
        background-color: white;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        padding: 5px;
        z-index: 1000;
    }
    .edit-menu button {
        background: none;
        border: none;
        cursor: pointer;
        color: #3498db;
        display: flex;
        align-items: center;
        padding: 5px;
    }
    .edit-menu button:hover {
        background-color: #f0f0f0;
    }
    .edit-menu button svg {
        margin-right: 5px;
    }
    #edit-modal {
        display: none;
        position: fixed;
        z-index: 2000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.4);
    }
    #edit-modal .modal-content {
        background-color: #fefefe;
        margin: 15% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 500px;
        border-radius: 8px;
    }
    #edit-input {
        width: 100%;
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    #update-element, #cancel-edit {
        padding: 10px 20px;
        margin-right: 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }
    #update-element {
        background-color: #3498db;
        color: white;
    }
    #cancel-edit {
        background-color: #ccc;
        color: black;
    }
    @media (max-width: 1024px) {
        body, html {
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
        }
        #browser {
            width: 100%;
            height: 100%;
            border-radius: 0;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        #titlebar {
            font-size: 14px;
            padding: 12px 16px;
        }
        #toolbar {
            flex-direction: row;
            flex-wrap: wrap;
            align-items: center;
            padding: 8px 4px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        #toolbar-left, #toolbar-right {
            display: flex;
            flex-wrap: nowrap;
            justify-content: flex-start;
            width: auto;
        }
        #addressbar-container {
            width: 100%;
            margin: 8px 0;
            order: -1;
        }
        #content {
            height: auto;
            flex-grow: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        #status-bar {
            font-size: 12px;
            padding: 8px 16px;
        }
        #bookmarks-panel, #revisions-panel {
            width: 98%;
            max-width: none;
            left: 1%;
            right: 1%;
        }
        .btn {
            padding: 8px;
            margin: 2px;
        }
        .btn svg {
            width: 20px;
            height: 20px;
        }
        #addressbar {
            font-size: 16px;
            padding: 10px 12px;
        }
        #addressbar-container .btn {
            width: 36px;
            height: 36px;
        }
        #publish-btn {
            font-size: 14px;
            padding: 12px 12px;
            margin-top: 8px;
            width: auto;
        }
        #model-select-btn {
            padding: 8px;
        }
        .model-option {
            padding: 10px 14px;
            font-size: 14px;
        }
        #model-select-container {
            position: relative;
        }
        #model-options {
            position: absolute;
            top: auto;
            bottom: 100%;
            right: 0;
            left: auto;
            transform: none;
            width: 180px;
            z-index: 1001;
        }
    }

    @media (max-width: 480px) {
        .btn {
            padding: 6px;
        }
        .btn svg {
            width: 18px;
            height: 18px;
        }
        #addressbar-container .btn {
            width: 32px;
            height: 32px;
        }
    }
    </style>
</head>
<body>
<div id="desktop">
    <div id="browser">
        <div id="titlebar">
            <div id="window-controls">
                <div class="window-button" id="close-button"></div>
                <div class="window-button" id="minimize-button"></div>
                <div class="window-button" id="maximize-button"></div>
            </div>
            <span id="page-title">NetSim - AI Powered Simulations</span>
        </div>
        <div id="toolbar">
            <div id="toolbar-left">
                <button class="btn" onclick="refreshPage()" title="Reload">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" />
                    </svg>
                </button>
                <button class="btn" onclick="goHome()" title="Home">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M10,20V14H14V20H19V12H16L12,8L8,12H5V20H10M12,3.84L18,9.84V20A2,2 0 0,1 16,22H8A2,2 0 0,1 6,20V9.84L12,3.84Z" />
                    </svg>
                </button>
                <button class="btn" onclick="improvePrompt()" title="Improve Prompt">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M7.5,5.6L5,7L6.4,4.5L5,2L7.5,3.4L10,2L8.6,4.5L10,7L7.5,5.6M19.5,15.4L22,14L20.6,16.5L22,19L19.5,17.6L17,19L18.4,16.5L17,14L19.5,15.4M22,2L20.6,4.5L22,7L19.5,5.6L17,7L18.4,4.5L17,2L19.5,3.4L22,2M13.34,12.78L15.78,10.34L13.66,8.22L11.22,10.66L13.34,12.78M14.37,7.29L16.71,9.63C17.1,10 17.1,10.65 16.71,11.04L5.04,22.71C4.65,23.1 4,23.1 3.63,22.71L1.29,20.37C0.9,20 0.9,19.35 1.29,18.96L12.96,7.29C13.35,6.9 14,6.9 14.37,7.29Z" />
                    </svg>
                </button>
            </div>
            <div id="addressbar-container">
                <input type="text" id="addressbar" autocomplete="off" placeholder="Describe a web app or website">
                <button class="btn" onclick="handleAddressBarSubmit()" title="Create or Edit">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M19.78,2H4.22C3,2 2,3 2,4.22V19.78C2,21 3,22 4.22,22H19.78C21,22 22,21 22,19.78V4.22C22,3 21,2 19.78,2M12,4L14.8,9.2H9.2L12,4M17,20H7L11.2,12H12.8L17,20M14.8,11.2L18,5.5V11.2H14.8M6,5.5L9.2,11.2H6V5.5M6,18.5V12.8H9.2L6,18.5M18,18.5L14.8,12.8H18V18.5Z" />
                    </svg>
                </button>
                <button class="btn" onclick="addBookmark()" title="Bookmark">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.46,13.97L5.82,21L12,17.27Z" />
                    </svg>
                </button>
                <!-- Revisions panel removed -->
            </div>
            <div id="toolbar-right">
                <div id="model-select-container">
                    <button id="model-select-btn" class="btn" onclick="toggleModelOptions()" title="Select Model">
                        <svg viewBox="0 0 24 24">
                            <path fill="currentColor" d="M7,2H17A2,2 0 0,1 19,4V20A2,2 0 0,1 17,22H7A2,2 0 0,1 5,20V4A2,2 0 0,1 7,2M7,4V8H17V4H7M7,10V12H9V10H7M11,10V12H13V10H11M15,10V12H17V10H15M7,14V16H9V14H7M11,14V16H13V14H11M15,14V16H17V14H15M7,18V20H9V18H7M11,18V20H13V18H11M15,18V20H17V18H15Z" />
                        </svg>
                    </button>
                    <div id="model-options">
                        <div class="model-option" data-model="claude-3.5-sonnet">Claude 3.5 Sonnet</div>
                        <div class="model-option" data-model="gpt-4o">GPT-4o</div>
                    </div>
                </div>
                <button class="btn" onclick="downloadSimulation()" title="Download">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                    </svg>
                </button>
                <button class="btn" onclick="toggleBookmarks()" title="View Bookmarks">
                    <svg viewBox="0 0 24 24">
                        <path fill="currentColor" d="M15,5A2,2 0 0,1 17,7V23L10,20L3,23V7C3,5.89 3.9,5 5,5H15M9,1H19A2,2 0 0,1 21,3V19L19,18.13V3H7A2,2 0 0,1 9,1Z" />
                    </svg>
                </button>
            </div>
            <button id="publish-btn" onclick="publishSimulation()">Publish</button>
        </div>
        <div id="content">
            <div class="min-h-screen text-white font-sans">
                <div class="max-w-6xl mx-auto px-4 py-16 sm:px-6 lg:px-8">
                    <img src="logo.png" alt="Logo" class="logo-img" style="max-width: 50%; height: auto; display: block; margin: 0 auto; padding: 0; line-height: 0;">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-16">
                        <div class="bg-white bg-opacity-10 backdrop-filter backdrop-blur-lg rounded-xl p-8 shadow-xl">
                            <h2 class="text-3xl font-bold mb-6 text-yellow-300">How to Use NetSim</h2>
                            <ol class="list-decimal list-inside space-y-3">
                                <li>Enter a description in the address bar</li>
                                <li>Click "Create" or press Enter</li>
                                <li>Wait for AI to generate your web experience</li>
                                <li>Interact with your creation</li>
                                <li>Update by entering new instructions</li>
                                <li>Use right-click to edit specific elements</li>
                                <li>Bookmark your project</li>
                                <li>Publish to get a shareable link</li>
                                <li>Download as an HTML file</li>
                            </ol>
                        </div>
                        <div class="bg-white bg-opacity-10 backdrop-filter backdrop-blur-lg rounded-xl p-8 shadow-xl">
                            <h2 class="text-3xl font-bold mb-6 text-yellow-300">Features</h2>
                            <ul class="list-disc list-inside space-y-3">
                                <li>Instant Web Generation</li>
                                <li>Interactive Simulated Browser</li>
                                <li>Project Updates</li>
                                <li>Right-Click Element Editing</li>
                                <li>Bookmarking</li>
                                <li>Publishing</li>
                                <li>Downloading</li>
                                <li>Revisions</li>
                                <li>Model Selection</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="status-bar">
    <span id="status-message">Ready</span>
    <a href="https://github.com/techcow2/netsim" target="_blank" id="github-link" class="mx-auto">GitHub</a>
    <a href="https://netsim.xyz/privacy" target="_blank" id="privacy-policy-link" class="mx-auto">Privacy Policy</a>
    <span id="connection-status">Secure</span>
</div>

        <div id="bookmarks-panel"></div>
        <div id="loading-overlay" style="display: none;">
            <div id="loading-spinner"></div>
            <div id="loading-text">Improving Prompt...</div>
        </div>
    </div>
</div>

<div id="modal">
    <div id="modal-content">
        <span id="modal-close">&times;</span>
        <h2>Published URL</h2>
        <input type="text" id="generated-url" readonly>
        <button id="copy-url">Copy URL</button>
        <button id="open-url">Open URL</button>
    </div>
</div>

<div id="improved-prompt-modal">
    <div id="improved-prompt-content">
        <h2>Improved Prompt</h2>
        <textarea id="improved-prompt-text"></textarea>
        <div id="improved-prompt-buttons">
            <button id="use-prompt">Use this prompt</button>
            <button id="cancel-prompt">Cancel</button>
        </div>
    </div>
</div>

<div id="edit-modal" class="modal">
    <div class="modal-content">
        <h2>Edit Element</h2>
        <input type="text" id="edit-input" placeholder="Enter your changes here">
        <button id="update-element">Update</button>
        <button id="cancel-edit">Cancel</button>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="script.js"></script>
</body>
</html>
